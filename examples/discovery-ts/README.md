# 服务发现协议示例 (TypeScript版本)

这是一个基于Node.js的服务发现协议服务端实现示例，用于在局域网内自动发现服务端设备。该示例基于UDP广播，使用HMAC-SHA256进行身份验证，与小爱开放平台的Rust客户端兼容。

## 功能特点

- 基于UDP广播的服务发现
- 使用HMAC-SHA256进行身份验证
- 支持时间窗口验证，防止重放攻击
- 返回WebSocket服务端口和IP地址
- 支持命令行参数配置

## 安装依赖

```bash
npm install
```

## 编译运行

```bash
# 开发模式运行
npm run dev

# 编译后运行
npm run build && npm start
```

## 命令行参数

| 参数 | 描述 | 默认值 |
|------|------|--------|
| `--port` | UDP监听端口 | 5354 |
| `--ws-port` | WebSocket服务端口 | 8080 |
| `--secret` | 用于HMAC验证的密钥 | "your-secret-key" |

## 安全配置

1. 使用强密钥（至少32字符）
2. 定期轮换密钥
3. 在客户端和服务端使用相同的密钥
4. 确保网络环境受信任